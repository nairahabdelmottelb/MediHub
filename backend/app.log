2025-03-06 06:54:37,431 - app.main - INFO - Database connection successful
2025-03-06 06:57:48,414 - app.main - INFO - Application shutting down
2025-03-06 06:57:50,988 - app.main - INFO - Database connection successful
2025-03-06 06:58:29,494 - app.main - INFO - Application shutting down
2025-03-06 06:58:31,474 - app.main - INFO - Database connection successful
2025-03-06 07:03:22,851 - app.main - INFO - Application shutting down
2025-03-06 07:05:24,310 - app.main - INFO - Database connection successful
2025-03-06 07:08:11,867 - app.config.database - ERROR - Database error: (1054, "Unknown column 'event_type' in 'field list'")
2025-03-06 07:08:11,867 - app.api.endpoints.auth - ERROR - Failed to log auth attempt: Database operation failed: (1054, "Unknown column 'event_type' in 'field list'")
2025-03-06 07:08:11,867 - app.api.endpoints.auth - ERROR - Login failed: 401: Incorrect email or password
2025-03-06 07:08:11,868 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:08:11,895 - app.config.database - ERROR - Database error: (1054, "Unknown column 'event_type' in 'field list'")
2025-03-06 07:08:11,895 - app.api.endpoints.auth - ERROR - Failed to log auth attempt: Database operation failed: (1054, "Unknown column 'event_type' in 'field list'")
2025-03-06 07:08:11,895 - app.api.endpoints.auth - ERROR - Login failed: 401: Incorrect email or password
2025-03-06 07:08:11,896 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:08:11,903 - app.config.database - ERROR - Database error: (1054, "Unknown column 'event_type' in 'field list'")
2025-03-06 07:08:11,903 - app.api.endpoints.auth - ERROR - Failed to log auth attempt: Database operation failed: (1054, "Unknown column 'event_type' in 'field list'")
2025-03-06 07:08:11,903 - app.api.endpoints.auth - ERROR - Login failed: 401: Incorrect email or password
2025-03-06 07:08:11,904 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:10:40,793 - app.api.endpoints.auth - ERROR - Failed to log auth attempt: (1054, "Unknown column 'user_id' in 'field list'")
2025-03-06 07:10:40,793 - app.api.endpoints.auth - ERROR - Login failed: 401: Incorrect email or password
2025-03-06 07:10:40,793 - app.config.database - ERROR - Database error: 401: Incorrect email or password
2025-03-06 07:10:40,794 - app.api.endpoints.auth - ERROR - Login error: Database operation failed: 401: Incorrect email or password
2025-03-06 07:10:40,795 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:10:40,821 - app.api.endpoints.auth - ERROR - Failed to log auth attempt: (1054, "Unknown column 'user_id' in 'field list'")
2025-03-06 07:10:40,822 - app.api.endpoints.auth - ERROR - Login failed: 401: Incorrect email or password
2025-03-06 07:10:40,822 - app.config.database - ERROR - Database error: 401: Incorrect email or password
2025-03-06 07:10:40,822 - app.api.endpoints.auth - ERROR - Login error: Database operation failed: 401: Incorrect email or password
2025-03-06 07:10:40,823 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:10:40,828 - app.api.endpoints.auth - ERROR - Failed to log auth attempt: (1054, "Unknown column 'user_id' in 'field list'")
2025-03-06 07:10:40,828 - app.api.endpoints.auth - ERROR - Login failed: 401: Incorrect email or password
2025-03-06 07:10:40,828 - app.config.database - ERROR - Database error: 401: Incorrect email or password
2025-03-06 07:10:40,828 - app.api.endpoints.auth - ERROR - Login error: Database operation failed: 401: Incorrect email or password
2025-03-06 07:10:40,829 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:11:15,601 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:11:15,602 - app.config.database - ERROR - Database error: 401: Incorrect email or password
2025-03-06 07:11:15,602 - app.api.endpoints.auth - ERROR - Login error: Database operation failed: 401: Incorrect email or password
2025-03-06 07:11:15,603 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:11:15,629 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:11:15,629 - app.config.database - ERROR - Database error: 401: Incorrect email or password
2025-03-06 07:11:15,629 - app.api.endpoints.auth - ERROR - Login error: Database operation failed: 401: Incorrect email or password
2025-03-06 07:11:15,630 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:11:15,635 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:11:15,635 - app.config.database - ERROR - Database error: 401: Incorrect email or password
2025-03-06 07:11:15,635 - app.api.endpoints.auth - ERROR - Login error: Database operation failed: 401: Incorrect email or password
2025-03-06 07:11:15,636 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 500 Internal Server Error"
2025-03-06 07:12:50,441 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:12:50,442 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:12:50,470 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:12:50,472 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:12:50,476 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:12:50,477 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:13:47,031 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:13:47,032 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:13:47,058 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:13:47,059 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:13:47,062 - app.api.endpoints.auth - WARNING - Login failed: Incorrect email or password
2025-03-06 07:13:47,063 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:15:47,465 - app.api.endpoints.auth - WARNING - Login failed: User admin@example.com not found
2025-03-06 07:15:47,467 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:15:47,493 - app.api.endpoints.auth - WARNING - Login failed: User admin@example.com not found
2025-03-06 07:15:47,494 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:15:47,497 - app.api.endpoints.auth - WARNING - Login failed: User nonexistent@example.com not found
2025-03-06 07:15:47,498 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:16:34,631 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-06 07:16:35,105 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:16:35,317 - app.api.endpoints.auth - WARNING - Login failed: Incorrect password for admin@example.com
2025-03-06 07:16:35,319 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:16:35,323 - app.api.endpoints.auth - WARNING - Login failed: User nonexistent@example.com not found
2025-03-06 07:16:35,324 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:17:44,549 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-06 07:17:44,772 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:17:44,978 - app.api.endpoints.auth - WARNING - Login failed: Incorrect password for admin@example.com
2025-03-06 07:17:44,980 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:17:44,985 - app.api.endpoints.auth - WARNING - Login failed: User nonexistent@example.com not found
2025-03-06 07:17:44,986 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:17:45,195 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:17:45,240 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 07:17:45,450 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:17:45,687 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:17:45,909 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:19,232 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-06 07:19:19,457 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:19,665 - app.api.endpoints.auth - WARNING - Login failed: Incorrect password for admin@example.com
2025-03-06 07:19:19,667 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:19,670 - app.api.endpoints.auth - WARNING - Login failed: User nonexistent@example.com not found
2025-03-06 07:19:19,671 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:19,887 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:19,890 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 07:19:20,098 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:20,103 - app.config.database - ERROR - Database error: (1054, "Unknown column 'u.is_active' in 'where clause'")
2025-03-06 07:19:20,103 - app.api.deps - ERROR - Authentication error: Database operation failed: (1054, "Unknown column 'u.is_active' in 'where clause'")
2025-03-06 07:19:20,104 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/departments "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:20,337 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:20,354 - app.config.database - ERROR - Database error: (1054, "Unknown column 'u.is_active' in 'where clause'")
2025-03-06 07:19:20,354 - app.api.deps - ERROR - Authentication error: Database operation failed: (1054, "Unknown column 'u.is_active' in 'where clause'")
2025-03-06 07:19:20,355 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:20,573 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:20,586 - app.config.database - ERROR - Database error: (1054, "Unknown column 'u.is_active' in 'where clause'")
2025-03-06 07:19:20,587 - app.api.deps - ERROR - Authentication error: Database operation failed: (1054, "Unknown column 'u.is_active' in 'where clause'")
2025-03-06 07:19:20,588 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/2 "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:53,195 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-06 07:19:53,420 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:53,631 - app.api.endpoints.auth - WARNING - Login failed: Incorrect password for admin@example.com
2025-03-06 07:19:53,633 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:53,637 - app.api.endpoints.auth - WARNING - Login failed: User nonexistent@example.com not found
2025-03-06 07:19:53,638 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:19:53,850 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:53,854 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 07:19:54,063 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:54,076 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 07:19:54,080 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/3 "HTTP/1.1 200 OK"
2025-03-06 07:19:54,291 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:54,314 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/4 "HTTP/1.1 200 OK"
2025-03-06 07:19:54,316 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/4 "HTTP/1.1 200 OK"
2025-03-06 07:19:54,524 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:19:54,545 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/5 "HTTP/1.1 200 OK"
2025-03-06 07:19:54,548 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/5 "HTTP/1.1 404 Not Found"
2025-03-06 07:26:48,916 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-06 07:26:49,144 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:26:49,351 - app.api.endpoints.auth - WARNING - Login failed: Incorrect password for admin@example.com
2025-03-06 07:26:49,353 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:26:49,357 - app.api.endpoints.auth - WARNING - Login failed: User nonexistent@example.com not found
2025-03-06 07:26:49,358 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 401 Unauthorized"
2025-03-06 07:26:49,572 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:26:49,576 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 07:26:49,784 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:26:49,798 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 07:26:49,801 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/6 "HTTP/1.1 200 OK"
2025-03-06 07:26:50,009 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:26:50,030 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/7 "HTTP/1.1 200 OK"
2025-03-06 07:26:50,033 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/7 "HTTP/1.1 200 OK"
2025-03-06 07:26:50,244 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/token "HTTP/1.1 200 OK"
2025-03-06 07:26:50,264 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/8 "HTTP/1.1 200 OK"
2025-03-06 07:26:50,267 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/8 "HTTP/1.1 404 Not Found"
2025-03-06 07:34:12,433 - app.main - INFO - Database connection successful
2025-03-06 07:34:12,433 - app.main - INFO - Application shutting down
2025-03-06 07:50:04,646 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 07:50:31,587 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 07:51:41,862 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 07:57:13,052 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:06:35,349 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:06:35,383 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:06:35,389 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:06:35,394 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:06:35,401 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:06:35,432 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:06:35,436 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:35,443 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:35,450 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:35,455 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:06:35,470 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:06:35,476 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:06:35,491 - app.main - ERROR - Error ID: 20250306080635
2025-03-06 08:06:35,492 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:06:35,492 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:06:35,494 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:06:35,674 - app.main - ERROR - Error ID: 20250306080635
2025-03-06 08:06:35,675 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:06:35,675 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:06:35,675 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 103, in get_medical_record
    doctor = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:06:35,896 - app.main - ERROR - Error ID: 20250306080635
2025-03-06 08:06:35,896 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:06:35,896 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:06:35,896 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:06:36,036 - app.main - ERROR - Error ID: 20250306080636
2025-03-06 08:06:36,036 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:06:36,036 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:06:36,037 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:06:36,207 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:06:36,214 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:06:36,220 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:06:36,237 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:06:36,242 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:36,250 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:36,258 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:36,273 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:06:36,279 - app.main - ERROR - Error ID: 20250306080636
2025-03-06 08:06:36,279 - app.main - ERROR - Request: GET http://testserver/api/v1/users/2
2025-03-06 08:06:36,279 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:06:36,279 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/users.py", line 138, in get_user
    patient_info = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:06:36,485 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:06:50,505 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:06:50,511 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:06:50,542 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:06:50,547 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:06:50,553 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:06:50,584 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:06:50,589 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:50,596 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:50,602 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:50,608 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:06:50,622 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:06:50,628 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:06:50,644 - app.main - ERROR - Error ID: 20250306080650
2025-03-06 08:06:50,644 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:06:50,644 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:06:50,645 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:06:50,836 - app.main - ERROR - Error ID: 20250306080650
2025-03-06 08:06:50,836 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:06:50,836 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:06:50,837 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 103, in get_medical_record
    doctor = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:06:51,064 - app.main - ERROR - Error ID: 20250306080651
2025-03-06 08:06:51,064 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:06:51,064 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:06:51,064 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:06:51,207 - app.main - ERROR - Error ID: 20250306080651
2025-03-06 08:06:51,207 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:06:51,207 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:06:51,208 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:06:51,392 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:06:51,399 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:06:51,407 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:06:51,426 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:06:51,431 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:51,443 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:51,451 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:06:51,463 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:06:51,469 - app.main - ERROR - Error ID: 20250306080651
2025-03-06 08:06:51,469 - app.main - ERROR - Request: GET http://testserver/api/v1/users/2
2025-03-06 08:06:51,469 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:06:51,469 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/users.py", line 138, in get_user
    patient_info = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:06:51,700 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:07:35,569 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:07:35,575 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:07:35,608 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:07:35,613 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:07:35,618 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:07:35,648 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:07:35,654 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:35,661 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:35,668 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:35,673 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:07:35,687 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:07:35,695 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:07:35,710 - app.main - ERROR - Error ID: 20250306080735
2025-03-06 08:07:35,710 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:07:35,710 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:07:35,711 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:07:35,877 - app.main - ERROR - Error ID: 20250306080735
2025-03-06 08:07:35,877 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:07:35,877 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:07:35,878 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 103, in get_medical_record
    doctor = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:07:36,086 - app.main - ERROR - Error ID: 20250306080736
2025-03-06 08:07:36,087 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:07:36,087 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:07:36,087 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:07:36,218 - app.main - ERROR - Error ID: 20250306080736
2025-03-06 08:07:36,218 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:07:36,218 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:07:36,218 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:07:36,371 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:07:36,377 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:07:36,384 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:07:36,402 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:07:36,407 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:36,415 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:36,422 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:36,435 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:07:36,440 - app.main - ERROR - Error ID: 20250306080736
2025-03-06 08:07:36,440 - app.main - ERROR - Request: GET http://testserver/api/v1/users/2
2025-03-06 08:07:36,440 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:07:36,441 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/users.py", line 138, in get_user
    patient_info = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:07:36,645 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:07:43,496 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:07:43,501 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:07:43,534 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:07:43,539 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:07:43,544 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:07:43,574 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:07:43,580 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:43,587 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:43,594 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:43,600 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:07:43,614 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:07:43,621 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:07:43,635 - app.main - ERROR - Error ID: 20250306080743
2025-03-06 08:07:43,636 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:07:43,636 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:07:43,637 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:07:43,808 - app.main - ERROR - Error ID: 20250306080743
2025-03-06 08:07:43,808 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:07:43,808 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:07:43,809 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 103, in get_medical_record
    doctor = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:07:44,016 - app.main - ERROR - Error ID: 20250306080744
2025-03-06 08:07:44,016 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:07:44,016 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:07:44,016 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:07:44,145 - app.main - ERROR - Error ID: 20250306080744
2025-03-06 08:07:44,145 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:07:44,145 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:07:44,145 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:07:44,296 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:07:44,302 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:07:44,309 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:07:44,326 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:07:44,331 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:44,339 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:44,345 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:07:44,357 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:07:44,363 - app.main - ERROR - Error ID: 20250306080744
2025-03-06 08:07:44,363 - app.main - ERROR - Request: GET http://testserver/api/v1/users/2
2025-03-06 08:07:44,363 - app.main - ERROR - Exception: coroutine raised StopIteration
2025-03-06 08:07:44,363 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/users.py", line 138, in get_user
    patient_info = cursor.fetchone()
  File "/usr/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/lib/python3.10/unittest/mock.py", line 1175, in _execute_mock_call
    result = next(effect)
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
RuntimeError: coroutine raised StopIteration

2025-03-06 08:07:44,564 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:08:57,669 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:08:57,674 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:08:57,679 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:08:57,684 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:08:57,690 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:08:57,722 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:08:57,727 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:08:57,733 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:08:57,741 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:08:57,745 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:08:57,763 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:08:57,770 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:08:57,786 - app.main - ERROR - Error ID: 20250306080857
2025-03-06 08:08:57,787 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:08:57,787 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:08:57,788 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:08:57,984 - app.main - ERROR - Error ID: 20250306080857
2025-03-06 08:08:57,984 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:08:57,984 - app.main - ERROR - Exception: 'NoneType' object is not subscriptable
2025-03-06 08:08:57,985 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 113, in get_medical_record
    (doctor["doctor_id"], record["patient_id"])
TypeError: 'NoneType' object is not subscriptable

2025-03-06 08:08:58,120 - app.main - ERROR - Error ID: 20250306080858
2025-03-06 08:08:58,120 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:08:58,121 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:08:58,121 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:08:58,287 - app.main - ERROR - Error ID: 20250306080858
2025-03-06 08:08:58,287 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:08:58,287 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:08:58,287 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:08:58,448 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:08:58,454 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:08:58,461 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:08:58,477 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:08:58,483 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:08:58,490 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:08:58,498 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:08:58,512 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:08:58,517 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:08:58,527 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:11:52,467 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:11:52,473 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:11:52,507 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:11:52,512 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:11:52,517 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:11:52,548 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:11:52,554 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:11:52,561 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:11:52,567 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:11:52,573 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:11:52,589 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:11:52,596 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:11:52,611 - app.main - ERROR - Error ID: 20250306081152
2025-03-06 08:11:52,611 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:11:52,611 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:11:52,612 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:11:52,804 - app.main - ERROR - Error ID: 20250306081152
2025-03-06 08:11:52,805 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:11:52,805 - app.main - ERROR - Exception: 'NoneType' object is not subscriptable
2025-03-06 08:11:52,805 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 113, in get_medical_record
    (doctor["doctor_id"], record["patient_id"])
TypeError: 'NoneType' object is not subscriptable

2025-03-06 08:11:52,943 - app.main - ERROR - Error ID: 20250306081152
2025-03-06 08:11:52,943 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:11:52,943 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:11:52,943 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:11:53,117 - app.main - ERROR - Error ID: 20250306081153
2025-03-06 08:11:53,117 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:11:53,117 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:11:53,117 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:11:53,271 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:11:53,278 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:11:53,284 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:11:53,302 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:11:53,308 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:11:53,315 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:11:53,323 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:11:53,335 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:11:53,341 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:11:53,351 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:12:01,918 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:12:01,924 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 200 OK"
2025-03-06 08:12:01,957 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 200 OK"
2025-03-06 08:12:01,962 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 200 OK"
2025-03-06 08:12:01,967 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:12:01,999 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:12:02,005 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,013 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,022 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,027 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:12:02,042 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:12:02,050 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:12:02,067 - app.main - ERROR - Error ID: 20250306081202
2025-03-06 08:12:02,068 - app.main - ERROR - Request: POST http://testserver/api/v1/medical-records
2025-03-06 08:12:02,068 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:12:02,069 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 40, in create_medical_record
    doctor["doctor_id"],
KeyError: 'doctor_id'

2025-03-06 08:12:02,258 - app.main - ERROR - Error ID: 20250306081202
2025-03-06 08:12:02,259 - app.main - ERROR - Request: GET http://testserver/api/v1/medical-records/1
2025-03-06 08:12:02,259 - app.main - ERROR - Exception: 'NoneType' object is not subscriptable
2025-03-06 08:12:02,259 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 113, in get_medical_record
    (doctor["doctor_id"], record["patient_id"])
TypeError: 'NoneType' object is not subscriptable

2025-03-06 08:12:02,400 - app.main - ERROR - Error ID: 20250306081202
2025-03-06 08:12:02,400 - app.main - ERROR - Request: GET http://testserver/api/v1/patients/1/medical-records
2025-03-06 08:12:02,400 - app.main - ERROR - Exception: local variable 'cursor' referenced before assignment
2025-03-06 08:12:02,401 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 144, in get_patient_medical_records
    cursor.execute(
UnboundLocalError: local variable 'cursor' referenced before assignment

2025-03-06 08:12:02,576 - app.main - ERROR - Error ID: 20250306081202
2025-03-06 08:12:02,577 - app.main - ERROR - Request: PUT http://testserver/api/v1/medical-records/1
2025-03-06 08:12:02,577 - app.main - ERROR - Exception: 'doctor_id'
2025-03-06 08:12:02,577 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/medical_records.py", line 235, in update_medical_record
    if record["doctor_id"] != doctor["doctor_id"]:
KeyError: 'doctor_id'

2025-03-06 08:12:02,753 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:12:02,759 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:12:02,766 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:12:02,783 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:12:02,789 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,797 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,803 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,816 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 200 OK"
2025-03-06 08:12:02,821 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:12:02,832 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 200 OK"
2025-03-06 08:17:24,533 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,567 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,573 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,579 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,586 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,593 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,601 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,607 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,613 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,622 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:17:24,638 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,644 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,660 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,666 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,674 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,680 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,689 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,696 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,703 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,719 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,726 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,733 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,740 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,753 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,760 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:17:24,766 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,602 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,637 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,644 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,650 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,657 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,666 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,672 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,678 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,685 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,693 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:26:28,709 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,715 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,727 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,734 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,740 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,747 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,756 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,763 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,769 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,786 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,792 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,800 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,807 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,820 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,827 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:26:28,834 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:43,961 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:27:43,996 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,003 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,009 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,017 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,025 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,031 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,037 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,044 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,052 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:27:44,067 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,073 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,086 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,093 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,100 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,106 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,114 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,121 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,128 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,145 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,152 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,158 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,165 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,179 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,186 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:27:44,194 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,536 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,570 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,577 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,583 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,591 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,600 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,607 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,614 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,621 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,629 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:29:28,644 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,651 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,664 - app.api.deps - ERROR - Token verification error: 
2025-03-06 08:29:28,665 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/medical-records "HTTP/1.1 401 Unauthorized"
2025-03-06 08:29:28,672 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,679 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,685 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,694 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,702 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,709 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,727 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,733 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,739 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,746 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,760 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,767 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:29:28,806 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,529 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,564 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,569 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,576 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/messages/unread/count "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,583 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/chatbot/history "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,590 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,597 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,604 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,610 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,618 - app.api.deps - ERROR - Token verification error: Invalid token
2025-03-06 08:31:03,633 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,641 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/doctors/1/schedule "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,655 - app.api.deps - ERROR - Token verification error: 
2025-03-06 08:31:03,656 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/medical-records "HTTP/1.1 401 Unauthorized"
2025-03-06 08:31:03,663 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,670 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1/medical-records "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,676 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/medical-records/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,684 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,691 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/allergies "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,697 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/patients/1/medications "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,713 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,720 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,726 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,732 - httpx - INFO - HTTP Request: DELETE http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,745 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,752 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:31:03,759 - httpx - INFO - HTTP Request: PUT http://testserver/api/v1/users/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:11,027 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:33:11,033 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:11,278 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/doctors/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:11,511 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:11,626 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:33:11,632 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:31,248 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:33:31,254 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:31,770 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:33:31,875 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:33:31,881 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:34:38,020 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:34:38,026 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:34:38,557 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:34:38,649 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:34:38,655 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:34:48,581 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:34:48,588 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:34:49,131 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/patients/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:34:49,223 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:34:49,229 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:35:07,221 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 404 Not Found"
2025-03-06 08:35:07,227 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:35:07,885 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 404 Not Found"
2025-03-06 08:35:07,891 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 404 Not Found"
2025-03-06 08:41:38,191 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:41:38,196 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:41:38,901 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:41:38,906 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:42:37,676 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:42:37,681 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:42:38,415 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:42:38,420 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:42:55,251 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:42:55,255 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:42:55,986 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:42:55,996 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:43:08,708 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:43:08,712 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:43:09,448 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:43:09,454 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:44:22,653 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:44:22,658 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:44:23,391 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:44:23,396 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:44:46,581 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:44:46,587 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:44:47,305 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:44:47,310 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:46:22,725 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:46:22,730 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:46:23,426 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/roles "HTTP/1.1 404 Not Found"
2025-03-06 08:46:23,432 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/roles/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:46:23,652 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:46:23,656 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-06 08:46:31,640 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments "HTTP/1.1 200 OK"
2025-03-06 08:46:31,646 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/departments/1 "HTTP/1.1 200 OK"
2025-03-06 08:46:32,364 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/roles "HTTP/1.1 404 Not Found"
2025-03-06 08:46:32,370 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/roles/2 "HTTP/1.1 404 Not Found"
2025-03-06 08:46:32,597 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations "HTTP/1.1 200 OK"
2025-03-06 08:46:32,601 - httpx - INFO - HTTP Request: GET http://testserver/api/v1/specializations/1 "HTTP/1.1 200 OK"
2025-03-08 16:34:10,478 - app.main - INFO - Application shutting down
2025-03-13 12:52:56,929 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:01:22,570 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:02:27,615 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:05:57,810 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:07:21,847 - app.config.database - ERROR - Transaction failed: (1054, "Unknown column 'u.username' in 'where clause'")
2025-03-13 13:07:21,847 - app.config.database - ERROR - Database error: Transaction failed: (1054, "Unknown column 'u.username' in 'where clause'")
2025-03-13 13:07:30,074 - app.config.database - ERROR - Transaction failed: (1054, "Unknown column 'u.username' in 'where clause'")
2025-03-13 13:07:30,074 - app.config.database - ERROR - Database error: Transaction failed: (1054, "Unknown column 'u.username' in 'where clause'")
2025-03-13 13:08:00,817 - app.config.database - ERROR - Transaction failed: (1054, "Unknown column 'u.username' in 'where clause'")
2025-03-13 13:08:00,817 - app.config.database - ERROR - Database error: Transaction failed: (1054, "Unknown column 'u.username' in 'where clause'")
2025-03-13 13:09:00,788 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:09:00,788 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:09:00,788 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:09:01,753 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:09:01,753 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:09:01,753 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:09:25,086 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:09:25,086 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:09:25,086 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:02,499 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:02,499 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:11:02,499 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:07,331 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:07,331 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:11:07,331 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:28,002 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:28,002 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:11:28,002 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:37,084 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:37,084 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:11:37,084 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:38,057 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:11:38,057 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:11:38,057 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:12:19,776 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:14:54,867 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:17:32,918 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:19:54,735 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:20:17,406 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:20:37,165 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:20:37,166 - app.api.endpoints.auth - ERROR - Authentication error: 'NoneType' object is not callable
2025-03-13 13:20:37,166 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:21:17,126 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:27:17,502 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:28:42,325 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:29:38,819 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:29:57,866 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:32:50,520 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:36:22,582 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:39:32,965 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:39:56,102 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:40:56,327 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:41:13,153 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:41:13,155 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:41:13,386 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-13 13:42:09,412 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:42:09,624 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-13 13:43:05,089 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-13 13:43:05,300 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-13 13:46:52,123 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:47:12,541 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-13 13:47:12,543 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:47:12,761 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-13 13:47:15,977 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-13 13:47:16,188 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-13 13:47:25,074 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:47:25,284 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-13 13:47:35,289 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:47:35,499 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-13 13:49:34,768 - app.main - INFO - Copied test.html to static/test.html
2025-03-13 13:49:38,334 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:49:38,336 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-13 13:49:38,564 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-13 13:49:39,606 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:49:39,817 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-13 13:49:41,016 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:49:41,227 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-13 13:49:53,430 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-13 13:49:53,643 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:23:24,643 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:23:24,854 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:25:56,583 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:26:03,691 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:26:03,694 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:26:03,924 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:27:19,965 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:27:22,485 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:27:22,490 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:27:22,719 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:27:32,595 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:27:32,810 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:28:04,333 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:28:09,749 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:28:09,752 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:28:09,980 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-14 05:28:26,455 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:28:26,667 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:28:38,490 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:28:40,472 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:28:40,475 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:28:40,704 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-14 05:28:46,920 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:28:47,131 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:30:25,497 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:30:35,757 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:30:35,759 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:30:35,988 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:32:27,909 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:32:28,119 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:36:13,950 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:36:22,258 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:36:22,260 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:36:22,494 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:36:31,678 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:36:48,355 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:36:48,357 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:36:48,585 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:38:07,929 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:38:08,135 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:38:53,942 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:38:54,147 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:39:27,912 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:39:34,485 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:39:34,487 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:39:34,488 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:39:34,490 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:39:34,711 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:39:34,717 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:39:34,719 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:41:57,760 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:42:15,703 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:42:15,705 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:42:15,706 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:42:15,708 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:42:15,928 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:42:15,933 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:42:15,936 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:43:17,236 - app.main - INFO - Request path: /api/v1/test
2025-03-14 05:43:17,384 - app.main - INFO - Request path: /favicon.ico
2025-03-14 05:43:26,042 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:43:26,042 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:43:26,253 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:43:26,258 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:43:52,442 - app.main - INFO - Request path: /api/v1/static/test
2025-03-14 05:43:58,022 - app.main - INFO - Request path: /api/static/test
2025-03-14 05:44:01,041 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:44:07,203 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:44:07,204 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:44:07,416 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:44:07,421 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:46:01,247 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:46:05,193 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:46:11,433 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:46:11,433 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:46:11,436 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:46:11,666 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:46:11,672 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:47:20,136 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:47:28,349 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:47:28,349 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:47:28,560 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:47:28,566 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 05:47:30,407 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:47:33,137 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:47:38,369 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:47:40,594 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:48:20,006 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:48:27,403 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:48:27,403 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:48:27,615 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:48:27,621 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 05:48:30,843 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:48:38,261 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:50:47,911 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:50:49,034 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:50:55,216 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:50:55,217 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:50:55,254 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:50:55,485 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:50:55,495 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 05:53:36,187 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:53:42,840 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:53:42,840 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:53:43,051 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:53:43,058 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 05:53:45,339 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 05:53:45,344 - app.config.database - ERROR - Database error: (1054, "Unknown column 'read_at' in 'field list'")
2025-03-14 05:53:45,344 - app.main - ERROR - Error ID: 20250314055345
2025-03-14 05:53:45,344 - app.main - ERROR - Request: GET http://localhost:8000/api/v1/chat/messages?contact_id=34
2025-03-14 05:53:45,344 - app.main - ERROR - Exception: Database operation failed: (1054, "Unknown column 'read_at' in 'field list'")
2025-03-14 05:53:45,349 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 123, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/chat.py", line 230, in get_messages
    with db.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: (1054, "Unknown column 'read_at' in 'field list'")

2025-03-14 05:53:56,801 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 05:55:45,169 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 05:55:46,827 - app.main - INFO - Request path: /static/test.html
2025-03-14 05:55:52,846 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 05:55:52,846 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 05:55:52,849 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 05:55:53,078 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 05:55:53,084 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 06:43:42,979 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 06:43:44,906 - app.main - INFO - Request path: /static/test.html
2025-03-14 06:43:51,437 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 06:43:51,438 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 06:43:51,441 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 06:43:51,668 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 06:43:51,674 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 06:44:30,597 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 06:44:31,891 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 06:44:31,892 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 06:44:31,894 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 06:44:32,124 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 06:44:32,131 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 06:48:16,887 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 06:48:19,340 - app.main - INFO - Request path: /static/test.html
2025-03-14 06:48:28,095 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 06:48:28,096 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 06:48:28,098 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 06:48:28,326 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 06:48:28,331 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 06:50:41,559 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 06:50:42,966 - app.main - INFO - Request path: /static/test.html
2025-03-14 06:50:48,484 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 06:50:48,485 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 06:50:48,487 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 06:50:48,715 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 06:50:48,721 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 06:53:12,954 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 06:53:13,695 - app.main - INFO - Request path: /static/test.html
2025-03-14 06:53:13,859 - app.main - INFO - Request path: /static/test.html
2025-03-14 06:53:19,455 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 06:53:19,456 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 06:53:19,458 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 06:53:19,696 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 06:53:19,702 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:02:28,805 - app.main - INFO - Request path: /static/test.html
2025-03-14 07:02:32,071 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:02:38,634 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:02:38,635 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:02:38,845 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:02:38,850 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:05:12,796 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:05:18,191 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:05:18,192 - app.api.endpoints.auth - INFO - Login attempt for user: mahmoudalarby41@gmail.com
2025-03-14 07:05:18,197 - app.api.endpoints.auth - WARNING - Failed login attempt for user: mahmoudalarby41@gmail.com
2025-03-14 07:05:23,632 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:05:23,633 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:05:23,845 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:05:23,851 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:05:25,632 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:05:32,478 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:05:32,486 - app.config.database - ERROR - Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:05:32,486 - app.config.database - ERROR - Database error: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:05:32,487 - app.main - ERROR - Error ID: 20250314070532
2025-03-14 07:05:32,487 - app.main - ERROR - Request: POST http://localhost:8000/api/v1/chat/send
2025-03-14 07:05:32,487 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:05:32,493 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 123, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/chat.py", line 159, in send_message
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")

2025-03-14 07:07:14,172 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:07:14,808 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:07:20,236 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:07:20,237 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:07:20,239 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:07:20,471 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:07:20,479 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:07:20,491 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:07:22,690 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:07:24,945 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:07:24,974 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:07:24,983 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:07:50,794 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:07:50,800 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:07:57,959 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:07:57,959 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:07:58,173 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:07:58,180 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:07:58,189 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:08:17,785 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:08:17,786 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-14 07:08:17,999 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-14 07:08:18,005 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:08:25,035 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:08:25,036 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-14 07:08:25,248 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-14 07:08:25,252 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:08:29,608 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:08:34,660 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:08:34,680 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:08:34,680 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:11:02,469 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:11:04,325 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:11:07,475 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:11:07,614 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:11:09,378 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:11:17,635 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:11:19,561 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:11:20,442 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:11:27,031 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:12:25,482 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:12:26,224 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:12:32,475 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:12:41,949 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:13:34,686 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:13:36,367 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:13:37,128 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:13:37,359 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:13:46,278 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:13:46,280 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:13:46,282 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:13:46,510 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:13:46,515 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:13:54,143 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:13:57,334 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:13:59,762 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:03,257 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:03,734 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:03,906 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:06,841 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:09,663 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:10,180 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:10,364 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:15,175 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:14:15,175 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:14:15,390 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:14:15,394 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:14:22,979 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:23,399 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:14:28,952 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:14:28,953 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:14:29,167 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:14:29,171 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:17:33,639 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:17:34,004 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:17:34,547 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:17:34,754 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:17:40,468 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:17:40,470 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:17:40,472 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:17:40,702 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:17:40,708 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:18:51,730 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:18:52,227 - app.main - INFO - Request path: /api/v1/test
2025-03-14 07:18:56,840 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:18:56,841 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:18:56,876 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:18:57,106 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:18:57,111 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:20:00,623 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:20:01,931 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:20:02,088 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:20:02,230 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:20:13,268 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:20:19,187 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:20:19,188 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:20:19,402 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:20:19,406 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:21:13,890 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:21:18,788 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:21:18,788 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:21:19,003 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:21:19,008 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:21:19,017 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:21:22,480 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:21:24,344 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:21:24,348 - app.config.database - ERROR - Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:21:24,348 - app.config.database - ERROR - Database error: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:21:24,348 - app.main - ERROR - Error ID: 20250314072124
2025-03-14 07:21:24,348 - app.main - ERROR - Request: POST http://localhost:8000/api/v1/chat/send
2025-03-14 07:21:24,348 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:21:24,350 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 123, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/chat.py", line 162, in send_message
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")

2025-03-14 07:21:25,724 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:21:25,727 - app.config.database - ERROR - Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:21:25,727 - app.config.database - ERROR - Database error: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:21:25,728 - app.main - ERROR - Error ID: 20250314072125
2025-03-14 07:21:25,728 - app.main - ERROR - Request: POST http://localhost:8000/api/v1/chat/send
2025-03-14 07:21:25,728 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")
2025-03-14 07:21:25,728 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 123, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/chat.py", line 162, in send_message
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'RETURNING message_id, sender_id, receiver_id, message, message_type, \n          ' at line 5")

2025-03-14 07:22:09,959 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:22:12,218 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:22:12,565 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:22:17,654 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:22:17,655 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:22:17,657 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:22:17,880 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:22:17,886 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:22:17,894 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:22:19,723 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:22:21,347 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:22:21,360 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:22:21,364 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:22:30,301 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:22:30,307 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:22:41,292 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:22:41,292 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-14 07:22:41,497 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-14 07:22:41,502 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:22:41,513 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:22:43,387 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:22:43,388 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:22:43,408 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:22:46,253 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:22:46,270 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:22:46,274 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:22:55,040 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:22:55,041 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:22:55,252 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:22:55,257 - app.main - INFO - Request path: /api/v1/users/me
2025-03-14 07:22:56,006 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:23:01,074 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:23:01,075 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:23:01,286 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:23:01,293 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:23:01,302 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 07:23:03,355 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:03,360 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:23:03,378 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:23:07,912 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:23:07,916 - app.api.endpoints.chat - ERROR - Error sending message to user 13: Object of type datetime is not JSON serializable
2025-03-14 07:23:07,926 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:07,931 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:23:12,701 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:21,883 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:23:21,887 - app.api.endpoints.chat - ERROR - Error sending message to user 34: Object of type datetime is not JSON serializable
2025-03-14 07:23:21,901 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:21,902 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:23:24,702 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:29,298 - app.main - INFO - Request path: /api/v1/chat/send
2025-03-14 07:23:29,302 - app.api.endpoints.chat - ERROR - Error sending message to user 34: Object of type datetime is not JSON serializable
2025-03-14 07:23:29,352 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:29,352 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:23:31,359 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:32,011 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:32,415 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:23:32,595 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:25:34,717 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:25:34,717 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:25:37,408 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:25:37,844 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:25:39,721 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:25:39,721 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:25:44,036 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:25:44,037 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:25:44,039 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:25:44,260 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:25:44,266 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:25:44,275 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 07:25:44,275 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:25:46,862 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:25:46,867 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:25:46,867 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:26:02,074 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:26:02,075 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-14 07:26:02,278 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-14 07:26:02,283 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:26:02,292 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 2
2025-03-14 07:26:02,292 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:26:03,283 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:26:03,283 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:26:03,302 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:26:06,851 - app.api.endpoints.chat - ERROR - Error sending message to user 13: Object of type datetime is not JSON serializable
2025-03-14 07:26:06,851 - app.api.endpoints.chat - ERROR - Error processing message: Object of type datetime is not JSON serializable
2025-03-14 07:26:06,852 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:26:10,358 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:26:10,363 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:26:10,384 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:26:14,496 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:26:16,387 - app.api.endpoints.chat - ERROR - Error sending message to user 13: Object of type datetime is not JSON serializable
2025-03-14 07:26:16,387 - app.api.endpoints.chat - ERROR - Error processing message: Object of type datetime is not JSON serializable
2025-03-14 07:26:16,388 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:26:18,903 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:28:21,395 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:28:21,395 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:28:21,395 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:28:21,395 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:28:23,455 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:28:25,573 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:28:26,947 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:28:26,947 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:28:35,934 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:28:35,934 - app.api.endpoints.auth - INFO - Login attempt for user: doc@example.com
2025-03-14 07:28:35,936 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:28:36,158 - app.api.endpoints.auth - INFO - Successful login for user: doc@example.com
2025-03-14 07:28:36,163 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:36,171 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 2
2025-03-14 07:28:36,171 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:28:40,281 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:28:40,288 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:28:40,288 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:28:46,135 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:28:46,136 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:28:46,341 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:28:46,348 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:46,355 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 07:28:46,356 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:28:47,695 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:28:47,696 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:28:47,714 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:50,084 - app.api.endpoints.chat - INFO - Message sent to receiver 34
2025-03-14 07:28:50,085 - app.api.endpoints.chat - INFO - Message sent from 13 to 34
2025-03-14 07:28:50,085 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:50,092 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:50,100 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:52,719 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:28:52,719 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:28:52,741 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:54,484 - app.api.endpoints.chat - INFO - Message sent to receiver 13
2025-03-14 07:28:54,484 - app.api.endpoints.chat - INFO - Message sent from 34 to 13
2025-03-14 07:28:54,484 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:54,491 - app.main - INFO - Request path: /api/v1/chat/messages/11/read
2025-03-14 07:28:54,491 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:54,507 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:59,160 - app.api.endpoints.chat - INFO - Message sent to receiver 13
2025-03-14 07:28:59,161 - app.api.endpoints.chat - INFO - Message sent from 34 to 13
2025-03-14 07:28:59,161 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:59,167 - app.main - INFO - Request path: /api/v1/chat/messages/12/read
2025-03-14 07:28:59,168 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:28:59,182 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:29:01,708 - app.api.endpoints.chat - INFO - Message sent to receiver 34
2025-03-14 07:29:01,709 - app.api.endpoints.chat - INFO - Message sent from 13 to 34
2025-03-14 07:29:01,709 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:29:01,715 - app.main - INFO - Request path: /api/v1/chat/messages/13/read
2025-03-14 07:29:01,716 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:29:01,733 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:29:07,513 - app.api.endpoints.chat - INFO - Message sent to receiver 13
2025-03-14 07:29:07,513 - app.api.endpoints.chat - INFO - Message sent from 34 to 13
2025-03-14 07:29:07,514 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:29:07,520 - app.main - INFO - Request path: /api/v1/chat/messages/14/read
2025-03-14 07:29:07,530 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:29:07,538 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:32:02,106 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:32:02,106 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:32:02,106 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:32:02,106 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:32:04,166 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:32:04,562 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:32:07,111 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:32:07,111 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:32:11,977 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:32:11,978 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:32:11,980 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:32:12,200 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:32:12,207 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:32:12,214 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 07:32:12,214 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:32:22,600 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:32:22,606 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:32:22,606 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:51:19,355 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:51:19,356 - app.api.endpoints.auth - INFO - Login attempt for user: doc@e.e
2025-03-14 07:51:19,564 - app.api.endpoints.auth - INFO - Successful login for user: doc@e.e
2025-03-14 07:51:19,573 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:51:19,582 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:51:19,582 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:53:02,962 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:53:02,962 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:53:02,962 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:53:02,962 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:53:04,846 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:53:05,832 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:53:12,589 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:53:12,589 - app.api.endpoints.auth - INFO - Login attempt for user: doc@e.e
2025-03-14 07:53:12,591 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:53:12,819 - app.api.endpoints.auth - INFO - Successful login for user: doc@e.e
2025-03-14 07:53:12,826 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:12,832 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:53:12,832 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:53:16,291 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:53:16,469 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:53:16,649 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:53:18,845 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:18,845 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:18,846 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:18,852 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:20,642 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:20,642 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:20,643 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:20,647 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:21,392 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:21,392 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:21,393 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:21,397 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:22,070 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:22,070 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:22,070 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:22,074 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:22,602 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:22,602 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:22,603 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:22,609 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:23,111 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:23,111 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:23,112 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:23,116 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:23,648 - app.api.endpoints.chat - INFO - Receiver 22 not connected, message saved to database only
2025-03-14 07:53:23,648 - app.api.endpoints.chat - INFO - Message sent from 34 to 22
2025-03-14 07:53:23,648 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:23,653 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:24,928 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:53:25,591 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:53:25,591 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:53:28,863 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:53:28,868 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:53:28,868 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:53:33,781 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:53:33,782 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:53:33,991 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:53:33,996 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:53:34,003 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 07:53:34,003 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:53:35,718 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:54:48,238 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:54:48,238 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:54:48,239 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:54:48,239 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:54:50,009 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:54:50,335 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:54:53,243 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:54:53,243 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:54:54,360 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:54:54,360 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:54:54,362 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:54:54,590 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:54:54,596 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:54:54,604 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:54:54,604 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:54:55,817 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:54:57,502 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:54:58,353 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:55:00,993 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:56:01,610 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:56:01,617 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:56:01,617 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:56:49,703 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:56:55,653 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:56:55,654 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:56:55,865 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:56:55,871 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:56:55,879 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 1
2025-03-14 07:56:55,879 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:56:57,147 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:56:59,192 - app.api.endpoints.chat - INFO - Receiver 34 not connected, message saved to database only
2025-03-14 07:56:59,192 - app.api.endpoints.chat - INFO - Message sent from 13 to 34
2025-03-14 07:56:59,193 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:56:59,201 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:57:02,241 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:57:02,247 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:57:02,247 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:57:10,776 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:57:10,777 - app.api.endpoints.auth - INFO - Login attempt for user: doc@e.e
2025-03-14 07:57:10,988 - app.api.endpoints.auth - INFO - Successful login for user: doc@e.e
2025-03-14 07:57:10,994 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:57:11,000 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 2
2025-03-14 07:57:11,000 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:57:13,460 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:57:15,655 - app.api.endpoints.chat - INFO - Message sent to receiver 34
2025-03-14 07:57:15,655 - app.api.endpoints.chat - INFO - Message sent from 13 to 34
2025-03-14 07:57:15,656 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:57:15,662 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:57:15,668 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:57:17,836 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:57:26,185 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:57:26,738 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:57:27,370 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:57:27,975 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:57:59,881 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 07:57:59,881 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 07:57:59,881 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 07:57:59,881 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 07:58:01,739 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 07:58:02,126 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:58:06,751 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:58:06,752 - app.api.endpoints.auth - INFO - Login attempt for user: doc@e.e
2025-03-14 07:58:06,754 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 07:58:06,983 - app.api.endpoints.auth - INFO - Successful login for user: doc@e.e
2025-03-14 07:58:06,989 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:58:06,996 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 07:58:06,996 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 07:58:08,720 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:58:08,720 - app.main - INFO - Request path: /api/v1/chat/messages/read-all
2025-03-14 07:58:08,737 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:58:12,059 - app.main - INFO - Request path: /static/chat.html
2025-03-14 07:58:18,272 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:58:18,273 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:58:18,484 - app.api.endpoints.auth - WARNING - Failed login attempt for user: seth0x41@gmail.com
2025-03-14 07:58:22,116 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 07:58:22,117 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 07:58:22,326 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 07:58:22,332 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:58:22,339 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 07:58:22,339 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 07:58:23,798 - app.main - INFO - Request path: /api/v1/chat/messages
2025-03-14 07:58:27,229 - app.api.endpoints.chat - INFO - Message sent to receiver 34
2025-03-14 07:58:27,229 - app.api.endpoints.chat - INFO - Message sent from 13 to 34
2025-03-14 07:58:27,230 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:58:27,236 - app.main - INFO - Request path: /api/v1/chat/messages/24/read
2025-03-14 07:58:27,245 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:58:27,253 - app.main - INFO - Request path: /api/v1/chat/contacts
2025-03-14 07:58:50,332 - app.main - INFO - Request path: /docs
2025-03-14 07:58:51,308 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-14 08:02:31,995 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 08:02:31,995 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 08:02:31,995 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:02:31,995 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:02:37,469 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 08:02:42,002 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:02:42,002 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:02:46,460 - app.main - INFO - Request path: /docs
2025-03-14 08:02:46,589 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-14 08:03:04,654 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 08:03:12,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 08:03:12,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 08:03:14,492 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 08:04:58,235 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 08:04:58,235 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 08:04:58,235 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:04:58,235 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:05:02,005 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 08:05:02,145 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:05:02,145 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:05:03,236 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:05:03,236 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:05:03,239 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:05:03,239 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:05:04,169 - app.main - INFO - Request path: /docs
2025-03-14 08:05:04,298 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-14 08:05:11,747 - app.main - INFO - Request path: /api/auth/login
2025-03-14 08:05:14,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 08:05:14,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 08:05:19,078 - app.main - INFO - Request path: /api/auth/login
2025-03-14 08:05:54,360 - app.main - INFO - Request path: /api/auth/login
2025-03-14 08:07:47,334 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:07:47,334 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 08:07:47,334 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 08:07:47,334 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:07:49,274 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 08:07:52,339 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:07:52,339 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:07:52,923 - app.main - INFO - Request path: /docs
2025-03-14 08:07:53,045 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-14 08:08:04,741 - app.main - INFO - Request path: /api/auth/login
2025-03-14 08:08:08,231 - app.main - INFO - Request path: /api/auth/login
2025-03-14 08:08:17,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 08:08:17,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 08:08:47,949 - app.main - INFO - Request path: /api/v1/auth/login
2025-03-14 08:08:47,950 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 08:08:47,952 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 08:08:48,182 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 08:10:02,723 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 08:10:02,723 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 1
2025-03-14 08:10:02,723 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:10:02,723 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:10:04,733 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 08:10:07,728 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:10:07,728 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:10:07,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 08:10:07,945 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 08:10:08,340 - app.main - INFO - Request path: /docs
2025-03-14 08:10:08,468 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-14 08:10:16,899 - app.main - INFO - Request path: /api/auth/token
2025-03-14 08:11:57,931 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:11:57,931 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 08:11:57,931 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 08:11:57,931 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:11:59,982 - app.main - INFO - Copied test.html to static/test.html
2025-03-14 08:12:02,145 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:12:02,145 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:12:02,932 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:12:02,932 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 0
2025-03-14 08:12:02,934 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket. Total connections: 1
2025-03-14 08:12:02,934 - app.api.endpoints.chat - INFO - User 34 connected to WebSocket
2025-03-14 08:12:03,732 - app.main - INFO - Request path: /docs
2025-03-14 08:12:03,835 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-14 08:12:10,173 - app.main - INFO - Request path: /api/auth/login
2025-03-14 08:12:10,177 - app.api.endpoints.auth - INFO - Login attempt for user: seth0x41@gmail.com
2025-03-14 08:12:10,178 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-14 08:12:10,407 - app.api.endpoints.auth - INFO - Successful login for user: seth0x41@gmail.com
2025-03-14 08:12:14,944 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket. Total connections: 2
2025-03-14 08:12:14,944 - app.api.endpoints.chat - INFO - User 13 connected to WebSocket
2025-03-14 08:12:18,161 - app.main - INFO - Request path: /api/specializations
2025-03-14 08:12:24,931 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket
2025-03-14 08:12:24,931 - app.api.endpoints.chat - INFO - User 34 disconnected from WebSocket. Remaining users: 1
2025-03-14 08:12:24,931 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket
2025-03-14 08:12:24,931 - app.api.endpoints.chat - INFO - User 13 disconnected from WebSocket. Remaining users: 0
2025-03-23 13:55:44,130 - app.main - INFO - Copied test.html to static/test.html
2025-03-23 13:55:47,977 - app.main - INFO - Request path: /
2025-03-23 13:55:48,104 - app.main - INFO - Request path: /favicon.ico
2025-03-23 13:56:00,555 - app.main - INFO - Request path: /
2025-03-23 13:56:05,047 - app.main - INFO - Request path: /docs
2025-03-23 13:56:05,955 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-23 13:58:20,321 - app.main - INFO - Request path: /api/auth/signup
2025-03-23 13:58:20,399 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-23 14:01:42,817 - app.main - INFO - Request path: /api/auth/login
2025-03-23 14:02:16,032 - app.main - INFO - Request path: /api/auth/login
2025-03-23 14:02:16,034 - app.api.endpoints.auth - INFO - Login attempt for user: nairah@medihub.com
2025-03-23 14:02:16,248 - app.api.endpoints.auth - INFO - Successful login for user: nairah@medihub.com
2025-03-23 14:03:21,825 - app.main - INFO - Request path: /api/users/
2025-03-23 14:04:00,362 - app.main - INFO - Request path: /api/users/me
2025-03-23 14:05:06,359 - app.main - INFO - Request path: /api/roles/
2025-03-23 14:08:28,354 - app.main - INFO - Request path: /api/users/
2025-03-23 14:10:34,466 - app.main - INFO - Request path: /api/users/36
2025-03-23 14:11:30,583 - app.main - INFO - Request path: /api/users/me
2025-03-23 14:12:01,645 - app.main - INFO - Request path: /api/roles/
2025-03-23 14:13:29,763 - app.main - INFO - Request path: /api/departments/
2025-03-23 14:14:01,813 - app.main - INFO - Request path: /api/doctors
2025-03-23 14:14:14,030 - app.main - INFO - Request path: /api/specializations
2025-03-23 14:15:43,440 - app.main - INFO - Request path: /api/doctors
2025-03-23 14:18:09,838 - app.main - INFO - Request path: /api/departments/
2025-03-23 14:18:18,929 - app.main - INFO - Request path: /api/departments/
2025-03-23 14:19:25,537 - app.main - INFO - Request path: /api/specializations
2025-03-23 14:19:30,469 - app.main - INFO - Request path: /api/doctors
2025-03-23 14:20:37,016 - app.main - INFO - Request path: /api/doctors
2025-03-23 14:22:16,396 - app.main - INFO - Request path: /api/doctors/
2025-03-23 14:22:16,613 - app.config.database - ERROR - Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")
2025-03-23 14:22:16,613 - app.config.database - ERROR - Database error: Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")
2025-03-23 14:22:16,613 - app.main - ERROR - Error ID: 20250323142216
2025-03-23 14:22:16,613 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/doctors/
2025-03-23 14:22:16,613 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")
2025-03-23 14:22:16,621 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/doctors.py", line 713, in create_doctor
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")

2025-03-23 14:22:29,727 - app.main - INFO - Request path: /api/doctors/
2025-03-23 14:22:29,943 - app.config.database - ERROR - Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")
2025-03-23 14:22:29,943 - app.config.database - ERROR - Database error: Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")
2025-03-23 14:22:29,943 - app.main - ERROR - Error ID: 20250323142229
2025-03-23 14:22:29,943 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/doctors/
2025-03-23 14:22:29,944 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")
2025-03-23 14:22:29,944 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/doctors.py", line 713, in create_doctor
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1054, "Unknown column 'phone_number' in 'field list'")

2025-03-23 14:23:12,621 - app.main - INFO - Request path: /api/doctors/1/calendar
2025-03-23 14:24:27,716 - app.main - INFO - Request path: /api/doctors/1/timeslots
2025-03-23 14:27:09,641 - app.main - INFO - Request path: /api/doctors/1/schedule
2025-03-23 14:27:09,711 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-03-23 14:27:09,711 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-03-23 14:27:09,711 - app.main - ERROR - Error ID: 20250323142709
2025-03-23 14:27:09,711 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/doctors/1/schedule
2025-03-23 14:27:09,711 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-03-23 14:27:09,712 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/doctors.py", line 629, in create_doctor_schedule
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")

2025-03-23 14:28:00,116 - app.main - INFO - Request path: /api/patients
2025-03-23 14:29:02,371 - app.main - INFO - Request path: /api/appointments/
2025-03-23 14:29:38,977 - app.main - INFO - Request path: /api/timeslots/
2025-03-23 14:32:01,052 - app.main - INFO - Request path: /api/appointments/8
2025-03-23 14:33:22,950 - app.main - INFO - Request path: /api/appointments/8
2025-03-23 14:33:22,951 - app.main - ERROR - Error ID: 20250323143322
2025-03-23 14:33:22,951 - app.main - ERROR - Request: GET http://0.0.0.0:8000/api/appointments/8
2025-03-23 14:33:22,951 - app.main - ERROR - Exception: 'NoneType' object has no attribute 'get'
2025-03-23 14:33:22,953 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/home/seth0x41/MediHub/backend/app/api/deps.py", line 19, in get_current_user
    user_id = payload.get("sub")
AttributeError: 'NoneType' object has no attribute 'get'

2025-03-23 14:35:06,977 - app.main - INFO - Copied test.html to static/test.html
2025-03-23 14:35:09,563 - app.main - INFO - Request path: /api/appointments/8
2025-03-23 14:35:09,564 - app.main - ERROR - Error ID: 20250323143509
2025-03-23 14:35:09,564 - app.main - ERROR - Request: GET http://0.0.0.0:8000/api/appointments/8
2025-03-23 14:35:09,564 - app.main - ERROR - Exception: 'NoneType' object has no attribute 'get'
2025-03-23 14:35:09,569 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 91, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 264, in app
    solved_result = await solve_dependencies(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/dependencies/utils.py", line 592, in solve_dependencies
    solved = await call(**sub_values)
  File "/home/seth0x41/MediHub/backend/app/api/deps.py", line 19, in get_current_user
    user_id = payload.get("sub")
AttributeError: 'NoneType' object has no attribute 'get'

2025-03-23 14:40:07,224 - app.main - INFO - Copied test.html to static/test.html
2025-03-23 14:40:09,612 - app.main - INFO - Request path: /api/appointments/8
2025-03-23 14:40:20,727 - app.main - INFO - Request path: /docs
2025-03-23 14:40:20,929 - app.main - INFO - Request path: /api/v1/openapi.json
2025-03-23 14:40:36,566 - app.main - INFO - Request path: /api/auth/login
2025-03-23 14:40:36,568 - app.api.endpoints.auth - INFO - Login attempt for user: nairah@medihub.com
2025-03-23 14:40:36,571 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-03-23 14:40:36,797 - app.api.endpoints.auth - WARNING - Failed login attempt for user: nairah@medihub.com
2025-03-23 14:41:12,959 - app.main - INFO - Request path: /api/auth/login
2025-03-23 14:41:12,960 - app.api.endpoints.auth - INFO - Login attempt for user: nairah@medihub.com
2025-03-23 14:41:13,175 - app.api.endpoints.auth - INFO - Successful login for user: nairah@medihub.com
2025-03-23 14:41:43,320 - app.main - INFO - Request path: /api/appointments/
2025-03-23 14:43:19,983 - app.main - INFO - Request path: /api/appointments/8
2025-03-23 14:43:22,651 - app.main - INFO - Request path: /api/appointments/2
2025-04-16 08:13:38,966 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:13:43,787 - app.main - INFO - Request path: /
2025-04-16 08:13:43,918 - app.main - INFO - Request path: /favicon.ico
2025-04-16 08:13:49,058 - app.main - INFO - Request path: /docs
2025-04-16 08:13:50,049 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:20:51,368 - app.main - INFO - Request path: /api/auth/signup
2025-04-16 08:20:51,377 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:20:51,378 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:20:51,378 - app.main - ERROR - Error ID: 20250416082051
2025-04-16 08:20:51,378 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/auth/signup
2025-04-16 08:20:51,378 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:20:51,383 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")

2025-04-16 08:21:30,442 - app.main - INFO - Request path: /api/auth/signup
2025-04-16 08:21:30,444 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:21:30,445 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:21:30,445 - app.main - ERROR - Error ID: 20250416082130
2025-04-16 08:21:30,445 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/auth/signup
2025-04-16 08:21:30,445 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:21:30,445 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")

2025-04-16 08:22:59,032 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:26:07,038 - app.main - INFO - Request path: /api/auth/signup
2025-04-16 08:26:07,045 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:26:07,046 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:26:07,046 - app.main - ERROR - Error ID: 20250416082607
2025-04-16 08:26:07,046 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/auth/signup
2025-04-16 08:26:07,046 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:26:07,048 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")

2025-04-16 08:26:36,450 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:26:41,379 - app.main - INFO - Request path: /docs
2025-04-16 08:26:41,604 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:26:51,238 - app.main - INFO - Request path: /api/auth/signup
2025-04-16 08:26:51,245 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:26:51,245 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:26:51,246 - app.main - ERROR - Error ID: 20250416082651
2025-04-16 08:26:51,246 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/auth/signup
2025-04-16 08:26:51,246 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:26:51,248 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")

2025-04-16 08:29:03,103 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:29:04,484 - app.main - INFO - Request path: /docs
2025-04-16 08:29:04,614 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:30:35,276 - app.main - INFO - Request path: /api/v1/auth/signup
2025-04-16 08:30:35,282 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:30:35,282 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:30:35,283 - app.main - ERROR - Error ID: 20250416083035
2025-04-16 08:30:35,283 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/v1/auth/signup
2025-04-16 08:30:35,283 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")
2025-04-16 08:30:35,284 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.roles' doesn't exist")

2025-04-16 08:32:52,281 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:32:52,372 - app.config.database - ERROR - Transaction failed: 0
2025-04-16 08:32:52,372 - app.config.database - ERROR - Database error: Transaction failed: 0
2025-04-16 08:33:22,816 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:33:27,600 - app.main - INFO - Request path: /docs
2025-04-16 08:33:27,792 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:33:53,698 - app.main - INFO - Request path: /api/v1/auth/signup
2025-04-16 08:33:53,706 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 08:33:53,977 - app.config.database - ERROR - Transaction failed: (1265, "Data truncated for column 'gender' at row 1")
2025-04-16 08:33:53,977 - app.config.database - ERROR - Database error: Transaction failed: (1265, "Data truncated for column 'gender' at row 1")
2025-04-16 08:33:53,978 - app.main - ERROR - Error ID: 20250416083353
2025-04-16 08:33:53,978 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/v1/auth/signup
2025-04-16 08:33:53,978 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1265, "Data truncated for column 'gender' at row 1")
2025-04-16 08:33:53,979 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1265, "Data truncated for column 'gender' at row 1")

2025-04-16 08:34:02,562 - app.main - INFO - Request path: /api/v1/auth/signup
2025-04-16 08:34:02,781 - app.config.database - ERROR - Transaction failed: (1265, "Data truncated for column 'blood_type' at row 1")
2025-04-16 08:34:02,781 - app.config.database - ERROR - Database error: Transaction failed: (1265, "Data truncated for column 'blood_type' at row 1")
2025-04-16 08:34:02,781 - app.main - ERROR - Error ID: 20250416083402
2025-04-16 08:34:02,781 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/v1/auth/signup
2025-04-16 08:34:02,781 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1265, "Data truncated for column 'blood_type' at row 1")
2025-04-16 08:34:02,782 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 166, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/auth.py", line 105, in signup
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1265, "Data truncated for column 'blood_type' at row 1")

2025-04-16 08:34:12,651 - app.main - INFO - Request path: /api/v1/auth/signup
2025-04-16 08:34:21,104 - app.main - INFO - Request path: /api/v1/auth/signup
2025-04-16 08:37:32,367 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:37:32,446 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:37:32,446 - app.main - INFO - Database initialized successfully
2025-04-16 08:37:34,763 - app.main - INFO - Request path: /docs
2025-04-16 08:37:34,897 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:38:30,101 - app.main - INFO - Request path: /docs
2025-04-16 08:38:30,205 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:39:08,998 - app.main - INFO - Request path: /docs
2025-04-16 08:39:09,141 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:39:26,827 - app.main - INFO - Request path: /docs
2025-04-16 08:39:26,919 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:39:30,097 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:39:30,163 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:39:30,163 - app.main - INFO - Database initialized successfully
2025-04-16 08:39:30,338 - app.main - INFO - Request path: /docs
2025-04-16 08:39:30,411 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:41:21,218 - app.main - INFO - Request path: /api/auth/signup
2025-04-16 08:41:26,505 - app.main - INFO - Request path: /api/auth/signup
2025-04-16 08:41:26,511 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 08:42:14,959 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:43:45,017 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:43:45,082 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:43:45,082 - app.main - INFO - Database initialized successfully
2025-04-16 08:43:46,486 - app.main - INFO - Request path: /docs
2025-04-16 08:43:46,642 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:46:02,732 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:46:02,803 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:46:02,803 - app.main - INFO - Database initialized successfully
2025-04-16 08:46:03,249 - app.main - INFO - Request path: /docs
2025-04-16 08:46:03,382 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:49:14,782 - app.main - INFO - Request path: /docs
2025-04-16 08:49:14,935 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:49:20,291 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:49:20,357 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:49:20,358 - app.main - INFO - Database initialized successfully
2025-04-16 08:49:21,660 - app.main - INFO - Request path: /docs
2025-04-16 08:49:21,762 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:50:18,403 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:51:33,721 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:52:12,638 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:52:12,702 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:52:12,702 - app.main - INFO - Database initialized successfully
2025-04-16 08:52:14,568 - app.main - INFO - Request path: /docs
2025-04-16 08:52:14,712 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:52:55,013 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:54:23,574 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:54:23,638 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:54:23,638 - app.main - INFO - Database initialized successfully
2025-04-16 08:54:26,823 - app.main - INFO - Request path: /docs
2025-04-16 08:54:26,961 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 08:54:52,831 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:55:30,592 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:56:01,751 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:56:01,755 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 08:57:04,684 - app.main - INFO - Request path: /
2025-04-16 08:57:04,844 - app.main - INFO - Request path: /favicon.ico
2025-04-16 08:57:20,492 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:57:36,614 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:57:45,684 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:57:56,848 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:58:25,280 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:58:51,942 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:59:03,958 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:59:10,071 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:59:21,167 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 08:59:21,236 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 08:59:21,236 - app.main - INFO - Database initialized successfully
2025-04-16 08:59:28,183 - app.main - INFO - Request path: /api/auth/login
2025-04-16 08:59:28,186 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 08:59:35,782 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:01:42,323 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:01:48,363 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:01:55,983 - app.main - INFO - Request path: /api/auth/login/json
2025-04-16 09:02:00,377 - app.main - INFO - Request path: /api/auth/login/json
2025-04-16 09:02:07,676 - app.main - INFO - Request path: /docs
2025-04-16 09:02:07,823 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 09:02:37,335 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:02:48,432 - app.main - INFO - Request path: /api/users/
2025-04-16 09:02:51,914 - app.main - INFO - Request path: /api/users/
2025-04-16 09:03:07,127 - app.main - INFO - Request path: /api/users/
2025-04-16 09:03:56,179 - app.main - INFO - Request path: /api/users/
2025-04-16 09:04:43,010 - app.main - INFO - Request path: /api/users/
2025-04-16 09:04:58,876 - app.main - INFO - Request path: /api/users/42
2025-04-16 09:05:17,146 - app.main - INFO - Request path: /api/roles/
2025-04-16 09:05:29,744 - app.main - INFO - Request path: /api/departments/
2025-04-16 09:05:37,368 - app.main - INFO - Request path: /api/departments/
2025-04-16 09:06:01,874 - app.main - INFO - Request path: /api/doctors
2025-04-16 09:06:22,605 - app.main - INFO - Request path: /api/insurance/
2025-04-16 09:07:00,623 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:07:09,038 - app.main - INFO - Request path: /docs
2025-04-16 09:07:09,207 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 09:07:17,318 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:07:34,367 - app.main - INFO - Request path: /api/users/
2025-04-16 09:07:42,884 - app.main - INFO - Request path: /api/users/me
2025-04-16 09:09:29,299 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:09:29,363 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:09:29,364 - app.main - INFO - Database initialized successfully
2025-04-16 09:09:30,821 - app.main - INFO - Request path: /api/users/me
2025-04-16 09:09:30,825 - app.api.endpoints.users - INFO - User requesting own info: 42
2025-04-16 09:09:39,592 - app.main - INFO - Request path: /api/roles/
2025-04-16 09:09:53,765 - app.main - INFO - Request path: /api/users/me
2025-04-16 09:09:53,767 - app.api.endpoints.users - INFO - User requesting own info: 42
2025-04-16 09:10:05,387 - app.main - INFO - Request path: /api/roles/
2025-04-16 09:10:19,784 - app.main - INFO - Request path: /api/departments/
2025-04-16 09:10:26,307 - app.main - INFO - Request path: /api/departments/
2025-04-16 09:10:38,956 - app.main - INFO - Request path: /api/specializations
2025-04-16 09:10:44,962 - app.main - INFO - Request path: /api/specializations
2025-04-16 09:10:52,854 - app.main - INFO - Request path: /api/doctors
2025-04-16 09:14:44,459 - app.main - INFO - Request path: /docs
2025-04-16 09:14:44,653 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 09:14:49,560 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:14:49,632 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:14:49,632 - app.main - INFO - Database initialized successfully
2025-04-16 09:15:00,410 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:15:00,413 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 09:15:06,963 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:16:00,837 - app.main - INFO - Request path: /api/users/
2025-04-16 09:18:48,583 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:18:48,647 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:18:48,647 - app.main - INFO - Database initialized successfully
2025-04-16 09:18:51,742 - app.main - INFO - Request path: /api/users/
2025-04-16 09:18:58,530 - app.main - INFO - Request path: /api/users/
2025-04-16 09:19:36,973 - app.main - INFO - Request path: /api/users/
2025-04-16 09:19:36,977 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 09:20:12,868 - app.main - INFO - Request path: /api/users/
2025-04-16 09:20:19,735 - app.main - INFO - Request path: /api/users/
2025-04-16 09:20:33,520 - app.main - INFO - Request path: /api/users/
2025-04-16 09:20:56,074 - app.main - INFO - Request path: /api/users/
2025-04-16 09:20:56,291 - app.api.endpoints.users - INFO - Created doctor with user_id 45
2025-04-16 09:21:38,117 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:21:56,521 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:22:17,525 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:22:30,893 - app.main - INFO - Request path: /api/roles/
2025-04-16 09:22:58,877 - app.main - INFO - Request path: /api/doctors/45/calendar
2025-04-16 09:26:32,813 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:26:32,878 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:26:32,878 - app.main - INFO - Database initialized successfully
2025-04-16 09:26:35,737 - app.main - INFO - Request path: /api/doctors/45/calendar
2025-04-16 09:26:35,741 - root - WARNING - Doctor 45 with doctor_id 2 NOT authorized for doctor_id 45
2025-04-16 09:26:40,606 - app.main - INFO - Request path: /api/doctors/45/calendar
2025-04-16 09:26:40,610 - root - WARNING - Doctor 45 with doctor_id 2 NOT authorized for doctor_id 45
2025-04-16 09:27:28,061 - app.main - INFO - Request path: /docs
2025-04-16 09:27:28,214 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 09:27:40,591 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:27:40,594 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 09:27:57,529 - app.main - INFO - Request path: /api/doctors/45/calendar
2025-04-16 09:27:57,533 - root - WARNING - Doctor 45 with doctor_id 2 NOT authorized for doctor_id 45
2025-04-16 09:28:23,606 - app.main - INFO - Request path: /api/users/doctor-data
2025-04-16 09:28:47,996 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:28:48,064 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:28:48,064 - app.main - INFO - Database initialized successfully
2025-04-16 09:28:48,254 - app.main - INFO - Request path: /docs
2025-04-16 09:28:48,394 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 09:31:07,502 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:31:07,568 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:31:07,568 - app.main - INFO - Database initialized successfully
2025-04-16 09:31:07,610 - app.main - INFO - Request path: /docs
2025-04-16 09:31:07,852 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 09:31:21,018 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:31:21,022 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 09:31:31,759 - app.main - INFO - Request path: /api/doctors/45
2025-04-16 09:31:41,857 - app.main - INFO - Request path: /api/doctors/2
2025-04-16 09:31:54,261 - app.main - INFO - Request path: /api/doctors/2/calendar
2025-04-16 09:35:29,761 - app.main - INFO - Request path: /api/doctors/2/timeslots
2025-04-16 09:35:42,361 - app.main - INFO - Request path: /api/doctors/2/bulk-timeslots
2025-04-16 09:35:44,045 - app.main - INFO - Request path: /api/doctors/2/bulk-timeslots
2025-04-16 09:35:56,281 - app.main - INFO - Request path: /api/doctors/2/schedule
2025-04-16 09:35:56,286 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-04-16 09:35:56,286 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-04-16 09:35:56,286 - app.main - ERROR - Error ID: 20250416093556
2025-04-16 09:35:56,286 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/doctors/2/schedule
2025-04-16 09:35:56,286 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-04-16 09:35:56,327 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 204, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/doctors.py", line 629, in create_doctor_schedule
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")

2025-04-16 09:35:58,993 - app.main - INFO - Request path: /api/doctors/2/schedule
2025-04-16 09:35:58,998 - app.config.database - ERROR - Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-04-16 09:35:58,998 - app.config.database - ERROR - Database error: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-04-16 09:35:58,998 - app.main - ERROR - Error ID: 20250416093558
2025-04-16 09:35:58,998 - app.main - ERROR - Request: POST http://0.0.0.0:8000/api/doctors/2/schedule
2025-04-16 09:35:58,999 - app.main - ERROR - Exception: Database operation failed: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")
2025-04-16 09:35:58,999 - app.main - ERROR - Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 98, in receive
    return self.receive_nowait()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 78, in call_next
    message = await recv_stream.receive()
  File "/home/seth0x41/.local/lib/python3.10/site-packages/anyio/streams/memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/home/seth0x41/MediHub/backend/app/main.py", line 204, in log_requests
    response = await call_next(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 84, in call_next
    raise app_exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/home/seth0x41/.local/lib/python3.10/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
  File "/home/seth0x41/MediHub/backend/app/api/endpoints/doctors.py", line 629, in create_doctor_schedule
    with db.transaction() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 67, in transaction
    with self.get_db() as conn:
  File "/usr/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/seth0x41/MediHub/backend/app/config/database.py", line 61, in get_db
    raise DatabaseError(f"Database operation failed: {str(e)}")
app.config.database.DatabaseError: Database operation failed: Transaction failed: (1146, "Table 'medihub.doctor_schedule' doesn't exist")

2025-04-16 09:39:13,178 - app.main - INFO - Request path: /api/doctors/2/timeslots
2025-04-16 09:39:33,658 - app.main - INFO - Request path: /api/doctors/2/schedule
2025-04-16 09:39:59,622 - app.main - INFO - Request path: /api/doctors/2/schedule
2025-04-16 09:40:41,886 - app.main - INFO - Request path: /api/patients
2025-04-16 09:42:47,460 - app.main - INFO - Request path: /api/patients/6/allergies
2025-04-16 09:42:58,037 - app.main - INFO - Request path: /api/patients/1/allergies
2025-04-16 09:43:16,624 - app.main - INFO - Request path: /api/patients/1/medications
2025-04-16 09:43:24,187 - app.main - INFO - Request path: /api/patients/1/medications
2025-04-16 09:43:35,303 - app.main - INFO - Request path: /api/appointments/
2025-04-16 09:43:57,644 - app.main - INFO - Request path: /api/auth/login
2025-04-16 09:44:13,584 - app.main - INFO - Request path: /api/appointments/
2025-04-16 09:44:22,292 - app.main - INFO - Request path: /api/appointments/
2025-04-16 09:44:52,726 - app.main - INFO - Request path: /api/timeslots/
2025-04-16 09:45:10,923 - app.main - INFO - Request path: /api/appointments/
2025-04-16 09:51:53,417 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 09:51:53,481 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 09:51:53,481 - app.main - INFO - Database initialized successfully
2025-04-16 11:50:17,962 - app.main - INFO - Copied test.html to static/test.html
2025-04-16 11:50:18,030 - app.utils.db_init - INFO - Database initialization complete
2025-04-16 11:50:18,030 - app.main - INFO - Database initialized successfully
2025-04-16 11:50:18,441 - app.main - INFO - Request path: /docs
2025-04-16 11:50:18,603 - app.main - INFO - Request path: /api/v1/openapi.json
2025-04-16 11:52:01,111 - app.main - INFO - Request path: /api/users/
2025-04-16 11:52:09,197 - app.main - INFO - Request path: /api/users/
2025-04-16 11:52:24,591 - app.main - INFO - Request path: /api/auth/login
2025-04-16 11:52:24,594 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/seth0x41/.local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-04-16 11:52:29,565 - app.main - INFO - Request path: /api/users/
2025-04-16 11:52:39,003 - app.main - INFO - Request path: /api/users/
2025-04-16 11:52:39,218 - app.api.endpoints.users - INFO - Created patient with user_id 46
2025-04-16 11:53:39,441 - app.main - INFO - Request path: /api/auth/login
2025-04-16 11:53:43,960 - app.main - INFO - Request path: /api/auth/login
2025-04-16 11:54:10,510 - app.main - INFO - Request path: /api/auth/login
2025-04-16 11:54:30,624 - app.main - INFO - Request path: /api/appointments/
2025-04-16 11:54:37,214 - app.main - INFO - Request path: /api/appointments/
2025-04-16 11:54:47,134 - app.main - INFO - Request path: /api/appointments/
2025-04-16 11:55:07,126 - app.main - INFO - Request path: /api/appointments/
2025-04-16 11:55:14,306 - app.main - INFO - Request path: /api/appointments/3
2025-04-16 11:55:37,795 - app.main - INFO - Request path: /api/insurance/
